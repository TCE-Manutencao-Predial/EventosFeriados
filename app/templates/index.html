{% extends "base.html" %}

{% block title %}Início - Sistema de Feriados e Eventos{% endblock %}

{% block content %}
<!-- Estatísticas -->
<div class="eventos-stats">
    <div class="eventos-stat-card">
        <i class="fas fa-calendar-check eventos-stat-icon" style="color: var(--eventos-primary)"></i>
        <h2 class="eventos-stat-value" id="totalFeriados">0</h2>
        <p class="eventos-stat-label">Total de Feriados</p>
    </div>
    <div class="eventos-stat-card">
        <i class="fas fa-calendar-plus eventos-stat-icon" style="color: var(--eventos-success)"></i>
        <h2 class="eventos-stat-value" id="totalEventos">0</h2>
        <p class="eventos-stat-label">Total de Eventos</p>
    </div>
    <div class="eventos-stat-card">
        <i class="fas fa-building eventos-stat-icon" style="color: var(--eventos-info)"></i>
        <h2 class="eventos-stat-value">4</h2>
        <p class="eventos-stat-label">Locais Disponíveis</p>
    </div>
    <div class="eventos-stat-card">
        <i class="fas fa-calendar-week eventos-stat-icon" style="color: var(--eventos-warning)"></i>
        <h2 class="eventos-stat-value" id="eventosHoje">0</h2>
        <p class="eventos-stat-label">Eventos Hoje</p>
    </div>
</div>

<!-- Controles e Próximo Evento -->
<div class="eventos-controls">
    <div class="eventos-controls-header">
        <h3 class="eventos-controls-title"><i class="fas fa-info-circle"></i> Informações Gerais</h3>
        <div class="eventos-btn-group">
            <button class="btn btn-success" onclick="window.location.href='{{ url_for('web.eventos') }}'">
                <i class="fas fa-plus"></i> Novo Evento
            </button>
            <button class="btn btn-primary" onclick="window.location.href='{{ url_for('web.feriados') }}'">
                <i class="fas fa-plus"></i> Novo Feriado
            </button>
            <button class="btn btn-warning" onclick="window.location.href='{{ url_for('web.calendario') }}'">
                <i class="fas fa-calendar"></i> Ver Calendário
            </button>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <h5><i class="fas fa-clock"></i> Próximo Evento</h5>
                <div id="proximoEvento" class="alert alert-info">
                    <div class="text-center">
                        <div class="spinner-border spinner-border-sm" role="status">
                            <span class="visually-hidden">Carregando...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <h5><i class="fas fa-building"></i> Locais Disponíveis</h5>
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-primary btn-sm text-start" data-bs-toggle="modal" data-bs-target="#locaisModal">
                        <i class="fas fa-microphone"></i> Auditório Nobre (AN)
                    </button>
                    <button class="btn btn-outline-info btn-sm text-start" data-bs-toggle="modal" data-bs-target="#locaisModal">
                        <i class="fas fa-door-open"></i> Átrio (AT)
                    </button>
                    <button class="btn btn-outline-warning btn-sm text-start" data-bs-toggle="modal" data-bs-target="#locaisModal">
                        <i class="fas fa-users"></i> Plenário (PL)
                    </button>
                    <button class="btn btn-outline-success btn-sm text-start" data-bs-toggle="modal" data-bs-target="#locaisModal">
                        <i class="fas fa-baby"></i> Creche (CR)
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Próximos Eventos e Feriados -->
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-calendar-plus"></i> Próximos Eventos</h5>
            </div>
            <div class="card-body">
                <div id="proximosEventos" class="list-group list-group-flush">
                    <div class="text-center p-3">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Carregando...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-calendar-check"></i> Próximos Feriados</h5>
            </div>
            <div class="card-body">
                <div id="proximosFeriados" class="list-group list-group-flush">
                    <div class="text-center p-3">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Carregando...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Locais -->
<div class="modal fade" id="locaisModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="fas fa-building"></i> Locais Disponíveis</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="list-group">
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-microphone"></i> Auditório Nobre</h6>
                            <small class="text-muted">Código: AN</small>
                        </div>
                        <p class="mb-1">Local para grandes eventos e solenidades</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-door-open"></i> Átrio</h6>
                            <small class="text-muted">Código: AT</small>
                        </div>
                        <p class="mb-1">Espaço para exposições e recepções</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-users"></i> Plenário</h6>
                            <small class="text-muted">Código: PL</small>
                        </div>
                        <p class="mb-1">Local para sessões e reuniões oficiais</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-baby"></i> Creche</h6>
                            <small class="text-muted">Código: CR</small>
                        </div>
                        <p class="mb-1">Espaço para atividades infantis</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Carregar estatísticas
    carregarEstatisticas();
    
    // Carregar próximos eventos e feriados
    carregarProximosEventos();
    carregarProximosFeriados();
    
    // Atualizar a cada 60 segundos
    setInterval(function() {
        carregarEstatisticas();
    }, 60000);
});

function carregarEstatisticas() {
    // Total de feriados
    $.get('{{ url_for("api_feriados.listar_feriados") }}', function(data) {
        $('#totalFeriados').text(data.total);
    });
    
    // Total de eventos
    $.get('{{ url_for("api_eventos.listar_eventos") }}', function(data) {
        $('#totalEventos').text(data.total);
    });
    
    // Eventos hoje
    const hoje = new Date();
    $.get(`{{ url_for("api_eventos.eventos_por_data") }}?dia=${hoje.getDate()}&mes=${hoje.getMonth()+1}&ano=${hoje.getFullYear()}`, function(data) {
        $('#eventosHoje').text(data.total || 0);
    });
    
    // Próximo evento
    $.get('{{ url_for("api_clp.proximo_evento_clp") }}', function(data) {
        if (data.encontrado) {
            const evento = data.evento;
            $('#proximoEvento').removeClass('alert-info').addClass('alert-success');
            $('#proximoEvento').html(`
                <h6 class="mb-1"><i class="fas fa-calendar-plus"></i> ${evento.nome}</h6>
                <p class="mb-1">
                    <i class="fas fa-calendar"></i> ${evento.data} 
                    <i class="fas fa-clock ms-2"></i> ${evento.inicio} - ${evento.fim}
                </p>
                <p class="mb-0 text-muted">
                    <i class="fas fa-map-marker-alt"></i> ${evento.local}
                    ${evento.em_dias === 0 ? '<span class="badge bg-danger ms-2">Hoje</span>' : 
                      evento.em_dias === 1 ? '<span class="badge bg-warning ms-2">Amanhã</span>' :
                      `<span class="badge bg-info ms-2">Em ${evento.em_dias} dias</span>`}
                </p>
            `);
        } else {
            $('#proximoEvento').html('<p class="mb-0 text-muted"><i class="fas fa-calendar-times"></i> Nenhum evento agendado</p>');
        }
    });
}

function carregarProximosEventos() {
    const ano = new Date().getFullYear();
    const mes = new Date().getMonth() + 1;
    
    $.get(`{{ url_for("api_eventos.listar_eventos") }}?ano=${ano}&mes=${mes}`, function(data) {
        const container = $('#proximosEventos');
        container.empty();
        
        if (data.eventos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum evento este mês</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 eventos
        data.eventos.slice(0, 5).forEach(function(evento) {
            const dataEvento = moment(`${evento.ano}-${evento.mes}-${evento.dia}`);
            const hoje = moment();
            const diasRestantes = dataEvento.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes === 1) {
                badge = '<span class="badge bg-warning">Amanhã</span>';
            } else if (diasRestantes <= 7) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${evento.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="fas fa-calendar"></i> ${evento.dia}/${evento.mes}/${evento.ano} 
                        <i class="fas fa-clock ms-2"></i> ${evento.hora_inicio} - ${evento.hora_fim}
                    </p>
                    <small class="text-muted">
                        <i class="fas fa-map-marker-alt"></i> ${evento.local}
                    </small>
                </div>
            `);
        });
    });
}

function carregarProximosFeriados() {
    const ano = new Date().getFullYear();
    
    $.get(`{{ url_for("api_feriados.listar_feriados") }}?ano=${ano}`, function(data) {
        const container = $('#proximosFeriados');
        container.empty();
        
        // Filtrar apenas feriados futuros
        const hoje = moment();
        const feriadosFuturos = data.feriados.filter(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            return dataFeriado.isAfter(hoje) || dataFeriado.isSame(hoje, 'day');
        });
        
        if (feriadosFuturos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum feriado próximo</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 feriados
        feriadosFuturos.slice(0, 5).forEach(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            const diasRestantes = dataFeriado.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes <= 30) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            let tipoBadge = '';
            switch(feriado.tipo) {
                case 'nacional':
                    tipoBadge = '<span class="badge bg-primary">Nacional</span>';
                    break;
                case 'estadual':
                    tipoBadge = '<span class="badge bg-secondary">Estadual</span>';
                    break;
                case 'municipal':
                    tipoBadge = '<span class="badge bg-success">Municipal</span>';
                    break;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${feriado.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="fas fa-calendar"></i> ${feriado.dia}/${feriado.mes}/${feriado.ano}
                        ${tipoBadge}
                    </p>
                    ${feriado.descricao ? `<small class="text-muted">${feriado.descricao}</small>` : ''}
                </div>
            `);
        });
    });
}
</script>
{% endblock %}<i class="fas fa-door-open"></i> Átrio</h6>
                            <small class="text-muted">Código: AT</small>
                        </div>
                        <p class="mb-1">Espaço para exposições e recepções</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-users"></i> Plenário</h6>
                            <small class="text-muted">Código: PL</small>
                        </div>
                        <p class="mb-1">Local para sessões e reuniões oficiais</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="fas fa-baby"></i> Creche</h6>
                            <small class="text-muted">Código: CR</small>
                        </div>
                        <p class="mb-1">Espaço para atividades infantis</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Carregar estatísticas
    carregarEstatisticas();
    
    // Carregar próximos eventos e feriados
    carregarProximosEventos();
    carregarProximosFeriados();
    
    // Verificar status da API
    verificarStatus();
    
    // Atualizar a cada 60 segundos
    setInterval(function() {
        carregarEstatisticas();
        verificarStatus();
    }, 60000);
});

function carregarEstatisticas() {
    // Total de feriados
    $.get('{{ url_for("api_feriados.listar_feriados") }}', function(data) {
        $('#totalFeriados').text(data.total);
    });
    
    // Total de eventos
    $.get('{{ url_for("api_eventos.listar_eventos") }}', function(data) {
        $('#totalEventos').text(data.total);
    });
    
    // Próximo evento
    $.get('{{ url_for("api_clp.proximo_evento_clp") }}', function(data) {
        if (data.encontrado) {
            const evento = data.evento;
            $('#proximoEvento').html(`
                <strong>${evento.nome}</strong><br>
                <small>${evento.data} às ${evento.inicio}</small><br>
                <small class="text-muted">${evento.local}</small>
            `);
        } else {
            $('#proximoEvento').html('<small class="text-muted">Nenhum evento agendado</small>');
        }
    });
}

function carregarProximosEventos() {
    const ano = new Date().getFullYear();
    const mes = new Date().getMonth() + 1;
    
    $.get(`{{ url_for("api_eventos.listar_eventos") }}?ano=${ano}&mes=${mes}`, function(data) {
        const container = $('#proximosEventos');
        container.empty();
        
        if (data.eventos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum evento este mês</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 eventos
        data.eventos.slice(0, 5).forEach(function(evento) {
            const dataEvento = moment(`${evento.ano}-${evento.mes}-${evento.dia}`);
            const hoje = moment();
            const diasRestantes = dataEvento.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes === 1) {
                badge = '<span class="badge bg-warning">Amanhã</span>';
            } else if (diasRestantes <= 7) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${evento.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="fas fa-calendar"></i> ${evento.dia}/${evento.mes}/${evento.ano} 
                        <i class="fas fa-clock ms-2"></i> ${evento.hora_inicio} - ${evento.hora_fim}
                    </p>
                    <small class="text-muted">
                        <i class="fas fa-map-marker-alt"></i> ${evento.local}
                    </small>
                </div>
            `);
        });
    });
}

function carregarProximosFeriados() {
    const ano = new Date().getFullYear();
    
    $.get(`{{ url_for("api_feriados.listar_feriados") }}?ano=${ano}`, function(data) {
        const container = $('#proximosFeriados');
        container.empty();
        
        // Filtrar apenas feriados futuros
        const hoje = moment();
        const feriadosFuturos = data.feriados.filter(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            return dataFeriado.isAfter(hoje) || dataFeriado.isSame(hoje, 'day');
        });
        
        if (feriadosFuturos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum feriado próximo</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 feriados
        feriadosFuturos.slice(0, 5).forEach(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            const diasRestantes = dataFeriado.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes <= 30) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            let tipoBadge = '';
            switch(feriado.tipo) {
                case 'nacional':
                    tipoBadge = '<span class="badge bg-primary">Nacional</span>';
                    break;
                case 'estadual':
                    tipoBadge = '<span class="badge bg-secondary">Estadual</span>';
                    break;
                case 'municipal':
                    tipoBadge = '<span class="badge bg-success">Municipal</span>';
                    break;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${feriado.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="fas fa-calendar"></i> ${feriado.dia}/${feriado.mes}/${feriado.ano}
                        ${tipoBadge}
                    </p>
                    ${feriado.descricao ? `<small class="text-muted">${feriado.descricao}</small>` : ''}
                </div>
            `);
        });
    });
}

function verificarStatus() {
    $.get('{{ url_for("api_status") }}', function(data) {
        // Status dos gerenciadores
        $('#statusGerenciadorFeriados').removeClass('text-success text-danger')
            .addClass(data.gerenciadores.feriados ? 'text-success' : 'text-danger');
        
        $('#statusGerenciadorEventos').removeClass('text-success text-danger')
            .addClass(data.gerenciadores.eventos ? 'text-success' : 'text-danger');
        
        $('#statusAPI').removeClass('text-success text-danger').addClass('text-success');
    }).fail(function() {
        $('.fas.fa-circle').removeClass('text-success').addClass('text-danger');
    });
}
</script>
{% endblock %}="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="bi bi-door-open"></i> Átrio</h6>
                            <small class="text-muted">Código: AT</small>
                        </div>
                        <p class="mb-1">Espaço para exposições e recepções</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="bi bi-people"></i> Plenário</h6>
                            <small class="text-muted">Código: PL</small>
                        </div>
                        <p class="mb-1">Local para sessões e reuniões oficiais</p>
                    </div>
                    <div class="list-group-item">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1"><i class="bi bi-balloon-heart"></i> Creche</h6>
                            <small class="text-muted">Código: CR</small>
                        </div>
                        <p class="mb-1">Espaço para atividades infantis</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Carregar estatísticas
    carregarEstatisticas();
    
    // Carregar próximos eventos e feriados
    carregarProximosEventos();
    carregarProximosFeriados();
    
    // Verificar status da API
    verificarStatus();
    
    // Atualizar a cada 60 segundos
    setInterval(function() {
        carregarEstatisticas();
        verificarStatus();
    }, 60000);
});

function carregarEstatisticas() {
    // Total de feriados
    $.get('{{ url_for("api_feriados.listar_feriados") }}', function(data) {
        $('#totalFeriados').text(data.total);
    });
    
    // Total de eventos
    $.get('{{ url_for("api_eventos.listar_eventos") }}', function(data) {
        $('#totalEventos').text(data.total);
    });
    
    // Próximo evento
    $.get('{{ url_for("api_clp.proximo_evento_clp") }}', function(data) {
        if (data.encontrado) {
            const evento = data.evento;
            $('#proximoEvento').html(`
                <strong>${evento.nome}</strong><br>
                <small>${evento.data} às ${evento.inicio}</small><br>
                <small class="text-muted">${evento.local}</small>
            `);
        } else {
            $('#proximoEvento').html('<small class="text-muted">Nenhum evento agendado</small>');
        }
    });
}

function carregarProximosEventos() {
    const ano = new Date().getFullYear();
    const mes = new Date().getMonth() + 1;
    
    $.get(`{{ url_for("api_eventos.listar_eventos") }}?ano=${ano}&mes=${mes}`, function(data) {
        const container = $('#proximosEventos');
        container.empty();
        
        if (data.eventos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum evento este mês</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 eventos
        data.eventos.slice(0, 5).forEach(function(evento) {
            const dataEvento = moment(`${evento.ano}-${evento.mes}-${evento.dia}`);
            const hoje = moment();
            const diasRestantes = dataEvento.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes === 1) {
                badge = '<span class="badge bg-warning">Amanhã</span>';
            } else if (diasRestantes <= 7) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${evento.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="bi bi-calendar"></i> ${evento.dia}/${evento.mes}/${evento.ano} 
                        <i class="bi bi-clock ms-2"></i> ${evento.hora_inicio} - ${evento.hora_fim}
                    </p>
                    <small class="text-muted">
                        <i class="bi bi-geo-alt"></i> ${evento.local}
                    </small>
                </div>
            `);
        });
    });
}

function carregarProximosFeriados() {
    const ano = new Date().getFullYear();
    
    $.get(`{{ url_for("api_feriados.listar_feriados") }}?ano=${ano}`, function(data) {
        const container = $('#proximosFeriados');
        container.empty();
        
        // Filtrar apenas feriados futuros
        const hoje = moment();
        const feriadosFuturos = data.feriados.filter(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            return dataFeriado.isAfter(hoje) || dataFeriado.isSame(hoje, 'day');
        });
        
        if (feriadosFuturos.length === 0) {
            container.html('<p class="text-muted text-center">Nenhum feriado próximo</p>');
            return;
        }
        
        // Mostrar apenas os próximos 5 feriados
        feriadosFuturos.slice(0, 5).forEach(function(feriado) {
            const dataFeriado = moment(`${feriado.ano}-${feriado.mes}-${feriado.dia}`);
            const diasRestantes = dataFeriado.diff(hoje, 'days');
            
            let badge = '';
            if (diasRestantes === 0) {
                badge = '<span class="badge bg-danger">Hoje</span>';
            } else if (diasRestantes <= 30) {
                badge = `<span class="badge bg-info">${diasRestantes} dias</span>`;
            }
            
            let tipoBadge = '';
            switch(feriado.tipo) {
                case 'nacional':
                    tipoBadge = '<span class="badge bg-primary">Nacional</span>';
                    break;
                case 'estadual':
                    tipoBadge = '<span class="badge bg-secondary">Estadual</span>';
                    break;
                case 'municipal':
                    tipoBadge = '<span class="badge bg-success">Municipal</span>';
                    break;
            }
            
            container.append(`
                <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${feriado.nome}</h6>
                        ${badge}
                    </div>
                    <p class="mb-1">
                        <i class="bi bi-calendar"></i> ${feriado.dia}/${feriado.mes}/${feriado.ano}
                        ${tipoBadge}
                    </p>
                    ${feriado.descricao ? `<small class="text-muted">${feriado.descricao}</small>` : ''}
                </div>
            `);
        });
    });
}

function verificarStatus() {
    $.get('{{ url_for("api_status") }}', function(data) {
        // Status dos gerenciadores
        $('#statusGerenciadorFeriados').removeClass('text-success text-danger')
            .addClass(data.gerenciadores.feriados ? 'text-success' : 'text-danger');
        
        $('#statusGerenciadorEventos').removeClass('text-success text-danger')
            .addClass(data.gerenciadores.eventos ? 'text-success' : 'text-danger');
        
        $('#statusAPI').removeClass('text-success text-danger').addClass('text-success');
    }).fail(function() {
        $('.bi-circle-fill').removeClass('text-success').addClass('text-danger');
    });
}
</script>
{% endblock %}